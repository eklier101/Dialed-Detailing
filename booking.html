<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book a Detailing – Dialed Detailing</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Book Your Appointment</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="booking.html">Book Now</a>
      <a href="admin.html">Admin</a>
    </nav>
  </header>

  <section class="form-section">
    <form id="bookingForm">
      <label for="name">Full Name</label>
      <input id="name" name="name" required>

      <label for="email">Email</label>
      <input id="email" type="email" required>

      <label for="vehicle">Vehicle Type</label>
      <select id="vehicle" required></select>

      <label for="service">Service</label>
      <select id="service" required></select>

      <label for="addons">Add-Ons</label>
      <select id="addons" multiple></select>

      <label for="time">Preferred Time</label>
      <select id="time" required></select>

      <button type="submit">Submit Booking</button>
    </form>
    <p id="confirm"></p>
  </section>

  <script>
    async function loadData() {
      const res = await fetch('bookings.json');
      const data = await res.json();

      const params = new URLSearchParams(window.location.search);
      const preselect = params.get('service');

      data.vehicleTypes.forEach(v => vehicle.insertAdjacentHTML('beforeend', `<option>${v}</option>`));
      data.services.forEach(s => service.insertAdjacentHTML('beforeend', `<option${s.name===preselect?' selected':''}>${s.name}</option>`));
      data.addons.forEach(a => addons.insertAdjacentHTML('beforeend', `<option>${a.name} (+$${a.price})</option>`));
      data.availableTimes.forEach(t => time.insertAdjacentHTML('beforeend', `<option>${t}</option>`));
    }

    bookingForm.addEventListener('submit', e => {
      e.preventDefault();
      confirm.textContent = "✅ Thanks! We'll contact you soon to confirm your appointment.";
      bookingForm.reset();
    });

    loadData();
  </script>
</body>
</html>